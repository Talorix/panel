<!DOCTYPE html>
<html lang="en" class="bg-neutral-950 text-gray-100 font-Figtree">
<head>
  <meta charset="UTF-8">
  <title><%= name %> - Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="min-h-screen flex">

  <!-- Sidebar -->
  <%- include('../components/sidebar', { name: name, user: user }) %>

  <main class="flex-1 p-8 overflow-auto">
    <div class="max-w-6xl mx-auto space-y-6">

      <!-- Welcome Banner -->
      <div class="bg-neutral-950 border border-neutral-900 p-6 rounded-2xl shadow-lg">
        <h1 class="text-3xl font-bold">ðŸ‘‹ Welcome back, <%= user.username %>!</h1>
        <p class="text-gray-400 mt-1">Here's your server overview.</p>
      </div>

      <!-- Servers Table -->
      <div class="bg-neutral-900 border border-neutral-800 rounded-2xl overflow-hidden">
        <table class="w-full text-left">
          <thead class="bg-neutral-950 border-b border-neutral-800">
            <tr class="text-gray-400 text-sm">
              <th class="p-4">Server Name</th>
              <th class="p-4">Node</th>
              <th class="p-4">IP Address</th>
              <th class="p-4">Status</th>
              <th class="p-4 text-right">Actions</th>
            </tr>
          </thead>
          <tbody>
            <% if (user.servers && user.servers.length > 0) { %>
              <% user.servers.forEach(server => { %>
                <tr class="border-b border-neutral-800 hover:bg-neutral-800/50 transition">
                  <td class="p-4 font-medium"><%= server.name %></td>
                  <td class="p-4 text-gray-300"><%= server.node.name %></td>
                  <td class="p-4 text-gray-400"><%= server.node.ip %>:<%= server.port %></td>
                  <td class="p-4">
                    <% if (server.status === "online") { %>
                      <span class="flex items-center gap-2 text-green-400">
                        <i data-lucide="heart-pulse" class="w-4 h-4 animate-pulse"></i> Online
                      </span>
                    <% } else { %>
                      <span class="flex items-center gap-2 text-red-400">
                        <i data-lucide="x-circle" class="w-4 h-4"></i> Offline
                      </span>
                    <% } %>
                  </td>
                  <td class="p-4 text-right flex gap-2 justify-end">
                    <a href="/server/manage/<%= server.id %>" class="inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 px-3 py-1.5 rounded-xl text-sm">
                      <i data-lucide="settings" class="w-4 h-4"></i> Manage
                    </a>
                  </td>
                </tr>
              <% }) %>
            <% } else { %>
              <tr>
                <td colspan="5" class="p-4 text-gray-400 text-center">No servers added yet.</td>
              </tr>
            <% } %>
          </tbody>
        </table>
      </div>

    </div>
  </main>

  <script>
    lucide.createIcons();
  </script>
</body>
</html>
